"use strict";(globalThis.webpackChunkshixu=globalThis.webpackChunkshixu||[]).push([[7636],{9041(e){e.exports=JSON.parse('{"blogPosts":[{"id":"Go error handing","metadata":{"permalink":"/Go error handing","editUrl":"https://github.com/NoSugarCoffee/NoSugarCoffee.github.io/edit/master/blog/GoErrorHanding.md","source":"@site/blog/GoErrorHanding.md","title":"Go \u9519\u8bef\u5904\u7406 - \u6700\u4f73\u5b9e\u8df5","description":"\u80cc\u666f","date":"2022-04-24T00:00:00.000Z","formattedDate":"April 24, 2022","tags":[{"label":"golang","permalink":"/tags/golang"}],"readingTime":2.625,"hasTruncateMarker":false,"authors":[{"name":"Shixu","title":"Owner","imageURL":"https://avatars.githubusercontent.com/u/25247325"}],"frontMatter":{"slug":"Go error handing","title":"Go \u9519\u8bef\u5904\u7406 - \u6700\u4f73\u5b9e\u8df5","date":"2022-04-24T00:00:00.000Z","author":"Shixu","author_title":"Owner","author_image_url":"https://avatars.githubusercontent.com/u/25247325","tags":["golang"]},"unlisted":false,"nextItem":{"title":"Mvnd vs Maven","permalink":"/Mvnd vs Maven"}},"content":"## \u80cc\u666f\\n\\ngo \u9075\u5faa [errors are values](https://blog.golang.org/errors-are-values) \u7684\u7406\u5ff5\uff0c\u5185\u7f6e error \u63d0\u4f9b\u7684\u4fe1\u606f\u6bd4\u8f83\u6709\u9650\uff0c\u5982\uff1a\\n``` \\n_, err := os.Open(\\"a.txt\\") // open a.txt: no such file or directory\\n```\\n\\n\u7136\u800c error \u51fa\u73b0\u5728\u54ea\u884c\uff1f\u8c03\u7528\u5806\u6808\u662f\u600e\u6837\u7684\uff1f\u4e0d\u5f97\u800c\u77e5\u3002\u5728\u5b9e\u9645\u4f7f\u7528\u65f6\uff0c\u8fd9\u4e9b\u4fe1\u606f\u7684\u7f3a\u5931\u4e0d\u5229\u7528 Troubleshooting\u3002\u8fd9\u4e5f\u662f\u672c\u6587\u8981\u63a2\u7a76\u7684 go \u9519\u8bef\u5904\u7406\u7684\u6700\u4f73\u5b9e\u8df5\\n\\n## \u89e3\u51b3\u65b9\u6848\\n\\n[pkg/errors](https://github.com/pkg/errors)  \u7684\u4f5c\u8005 Dave Cheney \u7ecf\u8fc7\u5927\u91cf\u7684\u601d\u8003\uff0c\u8d4b\u4e88\u4e86 error context \u7684\u80fd\u529b\uff0c\u5f88\u597d\u7684\u89e3\u51b3\u4e86\u4e0a\u8ff0\u63d0\u5230\u7684\u95ee\u9898\\n\\n### `pkg/errors` \u5206\u6790\\n`pkg/errors` \u4e3b\u8981\u6709\u4e24\u7c7b func\\n\\n\u4e00\u7c7b\u662f `Wrap`\uff0c\u8d4b\u4e88 error context \u7684\u80fd\u529b\\n```\\n// Wrap annotates cause with a message.\\nfunc Wrap(cause error, message string) error\\n```\\n\\n\u53e6\u4e00\u7c7b\u662f `Cause`\uff0c\u83b7\u53d6 error chain \u6e90\u5934\u5904 error\\n\\n```\\n// Cause unwraps an annotated error.\\nfunc Cause(err error) error\\n```\\n\\n`pkg/errors` \u6709\u4e09\u4e2a\u5b9e\u73b0 error \u63a5\u53e3\u7684 struct\uff0c\u5206\u522b\u662f `fundamental`/`withStack`/`withMessage`\\n\\n![image](img/errorImpl.png)\\n\\n\\n`fundamental` \u901a\u8fc7 `errors.New\uff08msg\uff09` \u521b\u5efa\uff0c\u7528\u4e8e\u521d\u59cb\u5316 error\uff0c \u4f5c\u4e3a error chain \u7684\u6e90\u5934\\n\\n`withMessage` \u901a\u8fc7 `errors.WithMessage(err, msg)` \u521b\u5efa\uff0c\u7528\u4e8e wrapper \u5df2\u6709 error \u5e76\u6dfb\u52a0 msg\\n\\n`withStack` \u901a\u8fc7 `errors.WithStack(err)` \u521b\u5efa\uff0c\u7528\u4e8e wrapper \u5df2\u6709 error \u5e76\u6dfb\u52a0 trace\uff0c\u82e5\u8fd8\u9700\u989d\u5916 msg \u53ef\u4f7f\u7528 `errors.Wrap(err, msg)`\\n\\n`fmt.Printf(\\"%+v\\", err)` \u7528\u6765\u6253\u5370 stack trace\\n\\n\\n### \u793a\u4f8b\u4ee3\u7801\\n\\n``` golang\\n// \u4f7f\u7528 errors.Wrap \u6216 error.WithStack wrapper \u539f\u751f\u7684 error\\nfunc readFile(path string) ([]byte, error) {\\n\\tf, err := os.Open(path)\\n        defer f.Close()\\n\\tif err != nil {\\t\\t\\n\\t\\treturn []byte{}, errors.Wrap(err, \\"open failed\\")\\n\\t}\\n\\tbytes, err := ioutil.ReadAll(f)\\n\\treturn bytes, errors.WithStack(err)\\n}\\n```\\n\\n```golang\\n// \u8c03\u7528\\nfunc CopyFile(old string, new string) error {\\n\\tlog.Print(\\"start to copy file\\")\\n\\tbytes, err := readFile(old)\\n\\tif err != nil {\\n\\t\\t// \u63a5\u53d7\u5230\u4e0b\u5c42\u4f20\u9012\u7684 context err\uff0c\u6709\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\uff1a\\n\\t\\t// 1.\u900f\u4f20\\n\\t\\t//return err\\n\\t\\t// 2. \u6dfb\u52a0\u672c\u5c42\u4fe1\u606f\\n\\t\\treturn errors.WithMessage(err, \\"copy failed\\")\\n\\t\\t// Warning: \u5207\u52ff\u4f7f\u7528 errors.Wrap, trace \u4fe1\u606f\u4f1a\u91cd\u590d\\n\\t\\t// return errors.Wrap(err, \\"copy failed\\")\\n\\t}\\n\\treturn writeFile(new, bytes)\\n}\\n```\\n## \u4f7f\u7528\u5c0f\u7ed3\\n- \u603b\u662f\u4f7f\u7528 [pkg/errors](https://github.com/pkg/errors) wrapper go \u539f\u751f err\uff0c\u5305\u62ec\u7b2c\u4e09\u65b9\u5e93\u8fd4\u56de\u7684 err\uff08\u9664\u975e\u80fd\u786e\u5b9a\u5176\u5df2\u7ecf\u4f7f\u7528 `pkg/errors` wrapper \u4e86\u5e26\u6709 context \u7684 error\uff09\\n- \u6700\u4e0b\u5c42\u51fd\u6570\u8fd4\u56de\u5e26 context \u7684 error\uff0c\u901a\u8fc7 `errors.New(msg)` \u521b\u5efa\u6216\u8005`errors.WithStack(err)/Wrap(err, msg)` wrapper\uff0c\u5728\u6700\u4e0a\u5c42\u51fd\u6570\u7edf\u4e00\u5904\u7406\uff08\u5982\u65e5\u5fd7\u6253\u5370 `fmt.Printf(\\"%+v\\", err)`\uff09\\n- \u80fd\u5904\u7406\u5219\u5c3d\u65e9\u5904\u7406\uff0c\u4e0d\u80fd\u5904\u7406\u5219\u900f\u4f20\u6216\u4f7f\u7528 `errors.WithMessage(err, msg)` \u5728\u629b\u5230\u4e0a\u5c42\u51fd\u6570\\n\\n## \u53c2\u8003\\n- [dont-just-check-errors-handle-them-gracefully](https://dave.cheney.net/2016/04/27/dont-just-check-errors-handle-them-gracefully)\\n- [stack-traces-and-the-errors-package](https://dave.cheney.net/2016/06/12/stack-traces-and-the-errors-package)\\n- [errors-are-values](https://blog.golang.org/errors-are-values)"},{"id":"Mvnd vs Maven","metadata":{"permalink":"/Mvnd vs Maven","editUrl":"https://github.com/NoSugarCoffee/NoSugarCoffee.github.io/edit/master/blog/Mvnd.md","source":"@site/blog/Mvnd.md","title":"Mvnd vs Maven","description":"Head Metadata customized title!","date":"2022-01-03T00:00:00.000Z","formattedDate":"January 3, 2022","tags":[{"label":"maven","permalink":"/tags/maven"},{"label":"java","permalink":"/tags/java"}],"readingTime":8.13,"hasTruncateMarker":false,"authors":[{"name":"Shixu","title":"Owner","imageURL":"https://avatars.githubusercontent.com/u/25247325"}],"frontMatter":{"slug":"Mvnd vs Maven","title":"Mvnd vs Maven","date":"2022-01-03T00:00:00.000Z","author":"Shixu","author_title":"Owner","author_image_url":"https://avatars.githubusercontent.com/u/25247325","tags":["maven","java"]},"unlisted":false,"prevItem":{"title":"Go \u9519\u8bef\u5904\u7406 - \u6700\u4f73\u5b9e\u8df5","permalink":"/Go error handing"},"nextItem":{"title":"Maven Summary","permalink":"/Maven Summary"}},"content":"<head>\\n  <title>Head Metadata customized title!</title>\\n  <meta charSet=\\"utf-8\\" />\\n  <meta name=\\"mvnd\\" content=\\"mvnd, maven\\" />\\n</head>\\n\\n## \u4ecb\u7ecd\\n[Mvnd](https://github.com/apache/maven-mvnd) \u662f\u4e00\u4e2a\u81f4\u529b\u4e8e\u63d0\u5347 maven \u6784\u5efa\u901f\u5ea6\u7684\u9879\u76ee\u3002\u5b83\u4e0d\u662f\u4e00\u4e2a\u5168\u65b0\u7684\u4ea7\u7269\uff0c\u800c\u662f\u5185\u7f6e maven\uff0c\u5e76\u4e14\u6574\u5408 Gradle \u548c Takari \u4e2d\u7684\u4f18\u52bf\u6280\u672f\u3002\u90a3\u4e48\u5b83\u501f\u9274\u4e86\u4ec0\u4e48\uff1f\u5bf9\u6bd4 maven \u4f18\u52bf\u662f\u5426\u660e\u663e\uff1f\u9002\u5408\u4f7f\u7528\u5728\u54ea\u4e9b\u573a\u666f\uff1f\u672c\u6587\u5e26\u4f60\u4e00\u63a2\u7a76\u7adf\u3002\\n\\n## \u57fa\u672c\u4f7f\u7528\\n### \u5b89\u88c5\\n[Mvnd 0.7.1](https://github.com/apache/maven-mvnd/tree/0.7.1) \u8fd0\u884c\u4f9d\u8d56 jdk 11, \u5982\u4e0d\u6ee1\u8db3\u6709\u4ee5\u4e0b\u63d0\u793a:\\n```\\norg/mvndaemon/mvnd/client/DefaultClient has been compiled by a more recent version of the Java Runtime (class file version 55.0)\\n```\\n\u63a8\u8350\u4f7f\u7528 [jabba](https://github.com/shyiko/jabba)\u6216 [asdf](https://github.com/asdf-vm/asdf) \u7ba1\u7406 java \u591a\u7248\u672c\u3002\\n\\n### \u89c2\u5bdf\\n\u6267\u884c `mvnd` \u547d\u4ee4\u5373\u53ef\u89c2\u5bdf\u5230\u542f\u52a8\u4e86 daemon \u8fdb\u7a0b\uff0c\u540c\u65f6\u8be5\u547d\u4ee4\u4e5f\u5145\u5f53 client \u4e0e daemon service \u4ea4\u4e92\u3002\\n\\n\u6267\u884c `mvnd --status` \u67e5\u770b daemon \u72b6\u6001\uff0c\u5982\u4e0b\u5c55\u793a\u7684\u662f\u4e00\u4e2a\u7a7a\u95f2\u72b6\u6001\u7684 daemon:\\n```\\nliangliangdai@liangliangdai-VirtualBox:~/jacoco$ /home/liangliangdai/Downloads/mvnd-0.7.1-linux-amd64/bin/mvnd --status\\n      ID      PID                   Address   Status    RSS            Last activity  Java home                                                                                                                               \\n88a359ee    69068     inet:/127.0.0.1:36633     Idle   132m  2021-12-30T12:20:43.405  /home/liangliangdai/.jabba/jdk/openjdk@1.11.0\\n```\\n\u6267\u884c `mvnd --stop` \u505c\u6b62 daemon\u3002\\n\\n## \u5b9e\u4f8b\u6d4b\u8bd5\\n\\n### \u4e8b\u5148\u8bf4\u660e\\n- \u5747\u57fa\u4e8e 4 core linux \u865a\u62df\u673a\\n- \u5747\u8bbe\u7f6e Jvm args `-Xms128M` `Xmx2048M`\\n- Mvnd \u9ed8\u8ba4\u5f00\u542f\u5e76\u884c\u6784\u5efa\uff0c\u7ebf\u7a0b\u6570\u91cf\u4e3a `Math.max(Runtime.getRuntime().availableProcessors() - 1, 1)`\uff0c\u4e3a\u4e86\u4fdd\u6301\u4e00\u81f4\uff0c\u5e76\u884c\u53c2\u6570\u7edf\u4e00\u8bbe\u7f6e `-T 4`\uff0c`-T 4` \u8868\u793a\u5f00\u542f\u5e76\u884c\u6784\u5efa\u7684\u7ebf\u7a0b\u6570\u4e3a 4 \u4e2a\\n\\n### [Jacoco](https://github.com/jacoco/jacoco/tree/v0.8.6) | 20 + modules\\n\\n<details>\\n<summary> <code>mvn clean verify</code> \u6784\u5efa\u6210\u529f </summary>\\n\\n```text\\n[INFO] Reactor Summary for root 0.8.6:\\n[INFO] \\n[INFO] JaCoCo ............................................. SUCCESS [  2.454 s]\\n[INFO] JaCoCo :: Core ..................................... SUCCESS [ 10.961 s]\\n[INFO] JaCoCo :: Report ................................... SUCCESS [  5.012 s]\\n[INFO] JaCoCo :: Agent RT ................................. SUCCESS [  2.425 s]\\n[INFO] JaCoCo :: Agent .................................... SUCCESS [  3.108 s]\\n[INFO] JaCoCo :: Ant ...................................... SUCCESS [  3.423 s]\\n[INFO] JaCoCo :: Command Line Interface ................... SUCCESS [  3.536 s]\\n[INFO] JaCoCo :: Examples ................................. SUCCESS [  3.183 s]\\n[INFO] JaCoCo :: Maven Plugin ............................. SUCCESS [  6.747 s]\\n[INFO] JaCoCo :: Tests .................................... SUCCESS [  0.192 s]\\n[INFO] JaCoCo :: Test :: Core ............................. SUCCESS [  6.984 s]\\n[INFO] JaCoCo :: Test :: Core :: Validation ............... SUCCESS [  0.049 s]\\n[INFO] JaCoCo :: Test :: Core :: Validation Java 5 ........ SUCCESS [  3.031 s]\\n[INFO] JaCoCo :: Test :: Core :: Validation Kotlin ........ SUCCESS [ 11.635 s]\\n[INFO] JaCoCo :: Test :: Core :: Validation Java 7 ........ SUCCESS [  2.744 s]\\n[INFO] JaCoCo :: Test :: Core :: Validation Java 8 ........ SUCCESS [  2.680 s]\\n[INFO] JaCoCo :: Test :: Core :: Validation Groovy ........ SUCCESS [  4.787 s]\\n[INFO] JaCoCo :: Test :: Core :: Validation Scala ......... SUCCESS [ 10.767 s]\\n[INFO] JaCoCo :: Test :: Report ........................... SUCCESS [  5.021 s]\\n[INFO] JaCoCo :: Test :: Agent RT ......................... SUCCESS [  3.188 s]\\n[INFO] JaCoCo :: Test :: Agent ............................ SUCCESS [  2.288 s]\\n[INFO] JaCoCo :: Test :: Ant .............................. SUCCESS [  8.807 s]\\n[INFO] JaCoCo :: Test :: Command Line Interface ........... SUCCESS [  4.286 s]\\n[INFO] JaCoCo :: Test :: Examples ......................... SUCCESS [ 17.863 s]\\n[INFO] JaCoCo :: Test :: Maven Plugin ..................... SUCCESS [01:59 min]\\n[INFO] JaCoCo :: Documentation ............................ SUCCESS [ 11.561 s]\\n[INFO] JaCoCo :: Distribution ............................. SUCCESS [  1.810 s]\\n[INFO] root ............................................... SUCCESS [  0.034 s]\\n[INFO] ------------------------------------------------------------------------\\n[INFO] BUILD SUCCESS\\n[INFO] ------------------------------------------------------------------------\\n[INFO] Total time:  04:18 min\\n```\\n\\n</details>\\n\\n<details>\\n<summary> <code>mvnd clean verify</code> \u6784\u5efa\u51fa\u9519 </summary>\\n\\n```text\\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-plugin-plugin:3.6.0:report (report) on project jacoco-maven-plugin: Execution report of goal org.apache.maven.plugins:maven-plugin-plugin:3.6.0:report failed: A required class was missing while executing org.apache.maven.plugins:maven-plugin-plugin:3.6.0:report: org/jacoco/report/check/IViolationsOutput\\n[ERROR] -----------------------------------------------------\\n[ERROR] realm =    plugin>org.apache.maven.plugins:maven-plugin-plugin:3.6.0\\n[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\\n[ERROR] urls[0] = file:/home/liangliangdai/.m2/repository/org/apache/maven/plugins/maven-plugin-plugin/3.6.0/maven-plugin-plugin-3.6.0.jar\\n[ERROR] urls[1] = file:/home/liangliangdai/.m2/repository/org/ow2/asm/asm/7.1/asm-7.1.jar\\n[ERROR] urls[2] = file:/home/liangliangdai/.m2/repository/org/sonatype/aether/aether-util/1.7/aether-util-1.7.jar\\n[ERROR] urls[3] = file:/home/liangliangdai/.m2/repository/org/sonatype/plexus/plexus-sec-dispatcher/1.3/plexus-sec-dispatcher-1.3.jar\\n[ERROR] urls[4] = file:/home/liangliangdai/.m2/repository/org/sonatype/plexus/plexus-cipher/1.4/plexus-cipher-1.4.jar\\n[ERROR] urls[5] = file:/home/liangliangdai/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.14/plexus-interpolation-1.14.jar\\n[ERROR] urls[6] = file:/home/liangliangdai/.m2/repository/org/sonatype/sisu/sisu-inject-bean/1.4.2/sisu-inject-bean-1.4.2.jar\\n[ERROR] urls[7] = file:/home/liangliangdai/.m2/repository/org/sonatype/sisu/sisu-guice/2.1.7/sisu-guice-2.1.7-noaop.jar\\n[ERROR] urls[8] = file:/home/liangliangdai/.m2/repository/org/codehaus/plexus/plexus-component-annotations/1.5.5/plexus-component-annotations-1.5.5.jar\\n[ERROR] urls[9] = file:/home/liangliangdai/.m2/repository/org/apache/maven/plugin-tools/maven-plugin-tools-api/3.6.0/maven-plugin-tools-api-3.6.0.jar\\n[ERROR] urls[10] = file:/home/liangliangdai/.m2/repository/org/apache/maven/plugin-tools/maven-plugin-tools-generators/3.6.0/maven-plugin-tools-generators-3.6.0.jar\\n[ERROR] urls[11] = file:/home/liangliangdai/.m2/repository/org/ow2/asm/asm-commons/7.0/asm-commons-7.0.jar\\n[ERROR] urls[12] = file:/home/liangliangdai/.m2/repository/org/ow2/asm/asm-tree/7.0/asm-tree-7.0.jar\\n[ERROR] urls[13] = file:/home/liangliangdai/.m2/repository/org/ow2/asm/asm-analysis/7.0/asm-analysis-7.0.jar\\n[ERROR] urls[14] = file:/home/liangliangdai/.m2/repository/net/sf/jtidy/jtidy/r938/jtidy-r938.jar\\n[ERROR] urls[15] = file:/home/liangliangdai/.m2/repository/org/apache/maven/plugin-tools/maven-plugin-tools-java/3.6.0/maven-plugin-tools-java-3.6.0.jar\\n[ERROR] urls[16] = file:/home/liangliangdai/.m2/repository/com/thoughtworks/qdox/qdox/2.0-M5/qdox-2.0-M5.jar\\n[ERROR] urls[17] = file:/home/liangliangdai/.m2/repository/org/apache/maven/plugin-tools/maven-plugin-tools-annotations/3.6.0/maven-plugin-tools-annotations-3.6.0.jar\\n[ERROR] urls[18] = file:/home/liangliangdai/.m2/repository/org/codehaus/plexus/plexus-archiver/3.6.0/plexus-archiver-3.6.0.jar\\n[ERROR] urls[19] = file:/home/liangliangdai/.m2/repository/org/codehaus/plexus/plexus-io/3.0.1/plexus-io-3.0.1.jar\\n[ERROR] urls[20] = file:/home/liangliangdai/.m2/repository/commons-io/commons-io/2.6/commons-io-2.6.jar\\n[ERROR] urls[21] = file:/home/liangliangdai/.m2/repository/org/apache/commons/commons-compress/1.16.1/commons-compress-1.16.1.jar\\n[ERROR] urls[22] = file:/home/liangliangdai/.m2/repository/org/objenesis/objenesis/2.6/objenesis-2.6.jar\\n[ERROR] urls[23] = file:/home/liangliangdai/.m2/repository/org/iq80/snappy/snappy/0.4/snappy-0.4.jar\\n[ERROR] urls[24] = file:/home/liangliangdai/.m2/repository/org/tukaani/xz/1.8/xz-1.8.jar\\n[ERROR] urls[25] = file:/home/liangliangdai/.m2/repository/org/apache/maven/plugin-tools/maven-plugin-annotations/3.6.0/maven-plugin-annotations-3.6.0.jar\\n[ERROR] urls[26] = file:/home/liangliangdai/.m2/repository/org/apache/maven/doxia/doxia-sink-api/1.4/doxia-sink-api-1.4.jar\\n[ERROR] urls[27] = file:/home/liangliangdai/.m2/repository/org/apache/maven/doxia/doxia-logging-api/1.4/doxia-logging-api-1.4.jar\\n[ERROR] urls[28] = file:/home/liangliangdai/.m2/repository/org/apache/maven/doxia/doxia-site-renderer/1.4/doxia-site-renderer-1.4.jar\\n[ERROR] urls[29] = file:/home/liangliangdai/.m2/repository/org/apache/maven/doxia/doxia-core/1.4/doxia-core-1.4.jar\\n[ERROR] urls[30] = file:/home/liangliangdai/.m2/repository/xerces/xercesImpl/2.9.1/xercesImpl-2.9.1.jar\\n[ERROR] urls[31] = file:/home/liangliangdai/.m2/repository/xml-apis/xml-apis/1.3.04/xml-apis-1.3.04.jar\\n[ERROR] urls[32] = file:/home/liangliangdai/.m2/repository/org/apache/httpcomponents/httpclient/4.0.2/httpclient-4.0.2.jar\\n[ERROR] urls[33] = file:/home/liangliangdai/.m2/repository/commons-codec/commons-codec/1.3/commons-codec-1.3.jar\\n[ERROR] urls[34] = file:/home/liangliangdai/.m2/repository/org/apache/httpcomponents/httpcore/4.0.1/httpcore-4.0.1.jar\\n[ERROR] urls[35] = file:/home/liangliangdai/.m2/repository/org/apache/maven/doxia/doxia-decoration-model/1.4/doxia-decoration-model-1.4.jar\\n[ERROR] urls[36] = file:/home/liangliangdai/.m2/repository/org/apache/maven/doxia/doxia-module-xhtml/1.4/doxia-module-xhtml-1.4.jar\\n[ERROR] urls[37] = file:/home/liangliangdai/.m2/repository/org/apache/maven/doxia/doxia-module-fml/1.4/doxia-module-fml-1.4.jar\\n[ERROR] urls[38] = file:/home/liangliangdai/.m2/repository/org/codehaus/plexus/plexus-i18n/1.0-beta-7/plexus-i18n-1.0-beta-7.jar\\n[ERROR] urls[39] = file:/home/liangliangdai/.m2/repository/org/apache/velocity/velocity-tools/2.0/velocity-tools-2.0.jar\\n[ERROR] urls[40] = file:/home/liangliangdai/.m2/repository/commons-beanutils/commons-beanutils/1.7.0/commons-beanutils-1.7.0.jar\\n[ERROR] urls[41] = file:/home/liangliangdai/.m2/repository/commons-digester/commons-digester/1.8/commons-digester-1.8.jar\\n[ERROR] urls[42] = file:/home/liangliangdai/.m2/repository/commons-chain/commons-chain/1.1/commons-chain-1.1.jar\\n[ERROR] urls[43] = file:/home/liangliangdai/.m2/repository/commons-logging/commons-logging/1.1/commons-logging-1.1.jar\\n[ERROR] urls[44] = file:/home/liangliangdai/.m2/repository/javax/servlet/servlet-api/2.3/servlet-api-2.3.jar\\n[ERROR] urls[45] = file:/home/liangliangdai/.m2/repository/dom4j/dom4j/1.1/dom4j-1.1.jar\\n[ERROR] urls[46] = file:/home/liangliangdai/.m2/repository/oro/oro/2.0.8/oro-2.0.8.jar\\n[ERROR] urls[47] = file:/home/liangliangdai/.m2/repository/sslext/sslext/1.2-0/sslext-1.2-0.jar\\n[ERROR] urls[48] = file:/home/liangliangdai/.m2/repository/org/apache/struts/struts-core/1.3.8/struts-core-1.3.8.jar\\n[ERROR] urls[49] = file:/home/liangliangdai/.m2/repository/antlr/antlr/2.7.2/antlr-2.7.2.jar\\n[ERROR] urls[50] = file:/home/liangliangdai/.m2/repository/org/apache/struts/struts-taglib/1.3.8/struts-taglib-1.3.8.jar\\n[ERROR] urls[51] = file:/home/liangliangdai/.m2/repository/org/apache/struts/struts-tiles/1.3.8/struts-tiles-1.3.8.jar\\n[ERROR] urls[52] = file:/home/liangliangdai/.m2/repository/commons-collections/commons-collections/3.2.1/commons-collections-3.2.1.jar\\n[ERROR] urls[53] = file:/home/liangliangdai/.m2/repository/org/apache/maven/reporting/maven-reporting-impl/2.3/maven-reporting-impl-2.3.jar\\n[ERROR] urls[54] = file:/home/liangliangdai/.m2/repository/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.jar\\n[ERROR] urls[55] = file:/home/liangliangdai/.m2/repository/org/apache/maven/shared/maven-shared-utils/0.6/maven-shared-utils-0.6.jar\\n[ERROR] urls[56] = file:/home/liangliangdai/.m2/repository/com/google/code/findbugs/jsr305/2.0.1/jsr305-2.0.1.jar\\n[ERROR] urls[57] = file:/home/liangliangdai/.m2/repository/commons-validator/commons-validator/1.3.1/commons-validator-1.3.1.jar\\n[ERROR] urls[58] = file:/home/liangliangdai/.m2/repository/org/apache/maven/reporting/maven-reporting-api/3.0/maven-reporting-api-3.0.jar\\n[ERROR] urls[59] = file:/home/liangliangdai/.m2/repository/org/codehaus/plexus/plexus-utils/3.0.20/plexus-utils-3.0.20.jar\\n[ERROR] urls[60] = file:/home/liangliangdai/.m2/repository/org/codehaus/plexus/plexus-velocity/1.1.8/plexus-velocity-1.1.8.jar\\n[ERROR] urls[61] = file:/home/liangliangdai/.m2/repository/junit/junit/3.8.1/junit-3.8.1.jar\\n[ERROR] urls[62] = file:/home/liangliangdai/.m2/repository/org/apache/maven/surefire/maven-surefire-common/2.19.1/maven-surefire-common-2.19.1.jar\\n[ERROR] urls[63] = file:/home/liangliangdai/.m2/repository/org/apache/maven/surefire/surefire-api/2.19.1/surefire-api-2.19.1.jar\\n[ERROR] urls[64] = file:/home/liangliangdai/.m2/repository/org/apache/maven/surefire/surefire-booter/2.19.1/surefire-booter-2.19.1.jar\\n[ERROR] urls[65] = file:/home/liangliangdai/.m2/repository/org/apache/commons/commons-lang3/3.1/commons-lang3-3.1.jar\\n[ERROR] urls[66] = file:/home/liangliangdai/.m2/repository/org/apache/velocity/velocity/1.7/velocity-1.7.jar\\n[ERROR] urls[67] = file:/home/liangliangdai/.m2/repository/commons-lang/commons-lang/2.4/commons-lang-2.4.jar\\n[ERROR] Number of foreign imports: 1\\n[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\\n[ERROR] \\n[ERROR] -----------------------------------------------------\\n[ERROR] : org.jacoco.report.check.IViolationsOutput\\n[ERROR] -> [Help 1]\\n```\\n</details>\\n\\n**\u5e76\u884c\u6784\u5efa\u53ef\u80fd\u5bfc\u81f4\u5931\u8d25\u3002**\\n\\n### [Sonar-java](https://github.com/SonarSource/sonar-java/tree/6.7.0.23054) | 10 ~ modules\\n\\n**`mvn-single`: maven3 - single thread build - `mvn clean verify`**\\n\\n| \u6b21\u6570 | \u65f6\u95f4 |\\n| ------ | ------ |\\n| 1| 02:27 min|\\n| 2| 02:28 min|\\n\\n**`mvn-multi`: maven3 - multi thread build - `mvn clean verify -T 4`**\\n\\nMaven3 \u7684 [\u5e76\u884c\u6784\u5efa](https://cwiki.apache.org/confluence/display/MAVEN/Parallel+builds+in+Maven+3)\u3002\\n\\n| \u6b21\u6570 | \u65f6\u95f4 |\\n| ------ | ------ |\\n| 1| 02:18 min |\\n| 2| 02:23 min |\\n\\n**`mvnd-multi-cold`: mvnd - multi thread build - \\"cold\\" daemon - `mvnd clean verify -T 4`**\\n\\n\\"cold\\" daemon \u662f\u6307\u4f7f\u7528 `mvnd --stop` \u505c\u6b62 daemon \u540e\u8fdb\u884c\u6784\u5efa\u3002\\n\\n| \u6b21\u6570 | \u65f6\u95f4 |\\n| ------ | ------ |\\n| 1| 02:13 min |\\n| 2| 02:08 min |\\n\\n**`mvnd-multi-hot`: mvnd - multi thread build - \\"hot\\" daemon - `mvnd clean verify -T 4`**\\n\\n\\"hot\\" daemon \u662f\u6307 daemon \u5df2\u7ecf\u6784\u5efa\u8fc7\u51e0\u6b21\u3002\\n\\n| \u6b21\u6570 | \u65f6\u95f4 |\\n| ------ | ------ |\\n| 1| 01:56 min |\\n| 2| 01:51 min |\\n\\n**\u4ece `mvnd-multi-hot` \u4e0e `mvn-single` \u53ef\u5f97\u6700\u4f18\u60c5\u51b5\u4e0b mvnd \u5927\u7ea6\u53ef\u4ee5\u4e3a\u6b64\u9879\u76ee\u63d0\u9ad8 20% \u7684\u6784\u5efa\u901f\u5ea6\u3002**\\n\\n## \u7ed3\u8bba\u53ca\u5206\u6790\\n\\n### C/S \u548c smart builder \u662f\u5176\u5feb\u7684\u539f\u56e0\\n\\nMvnd \u501f\u9274 [Gradle daemon](https://docs.gradle.org/current/userguide/gradle_daemon.html) \u7684\u601d\u60f3\uff0c\u4f7f daemon \u5e38\u9a7b\u540e\u53f0\uff0c\u6784\u5efa\u8bf7\u6c42\u7531 [GraalVM client](https://www.graalvm.org/) \u8f6c\u53d1\uff0c\u5f97\u76ca\u4e8e classloader cache \u548c JIT \u7684\u7279\u6027, \u4e0b\u6b21\u6784\u5efa\u65e0\u9700\u91cd\u590d\u52a0\u8f7d\u5df2\u7f13\u5b58\u7684 plugin classes\uff0c\u540c\u65f6\u70ed\u70b9\u4ee3\u7801\u4fe1\u606f\u4e5f\u88ab\u8bb0\u5f55\uff0c\u66f4\u5feb\u751a\u81f3\u76f4\u63a5 JIT\u4e0d\u50cf maven \u6bcf\u6b21\u6784\u5efa\u90fd\u9700\u8981\u65b0\u5efa jvm\uff0c\u6545 C/S \u67b6\u6784\u662f mvnd \u6784\u5efa\u5feb\u7684\u5173\u952e\u56e0\u7d20\u4e4b\u4e00\u3002\\n\\n> `mvnd-multi-hot` \u4f18\u4e8e `mvnd-multi-cold` \u7684\u7ed3\u679c\uff0c\u5f88\u597d\u7684\u4f53\u73b0\u4e86 daemon \u7684\u4f18\u52bf\u3002\\n\\nMvnd \u501f\u9274 [Takari smart builder](http://takari.io/book/30-team-maven.html#takari-smart-builder) \u7684\u6280\u672f\uff0c\u76f8\u6bd4\u4e0e maven3 \u5e76\u884c\u6784\u5efa\u6a21\u578b\u66f4\u4f18\u3002\u6b64\u4e3a mvnd \u6784\u5efa\u5feb\u7684\u53e6\u4e00\u5173\u952e\u56e0\u7d20\u3002\u4e0b\u56fe\u5c55\u793a\u4e86 maven 3 \u548c mvnd \u5e76\u884c\u6784\u5efa\u6a21\u578b\u7684\u533a\u522b\uff1a\\n![smartbuilder.png](img/smartbuilder.png)\\n\\n> `mvnd-multi-cold`\uff0c`mvn-multi`  \u53cc\u65b9\u90fd\u662f\u5e76\u884c\u6784\u5efa\u4e14\u4ece \\"cold\\" \u542f\u52a8\uff0cmvnd \u7565\u4f18\uff0c\u6545\u4f18\u52bf\u5f88\u53ef\u80fd\u6765\u81ea smart build\uff0c\u5f53\u7136\u6837\u672c\u6570\u592a\u5c11\uff0c\u4e0d\u8db3\u4ee5\u4e0b\u5b9a\u8bba\uff0c\u8bfb\u8005\u53ef\u81ea\u884c\u6d4b\u8bd5\u3002\\n\\n### Mvnd \u9002\u5408\u672c\u5730\u6784\u5efa\uff0cCI \u6709\u4e00\u5b9a\u6f5c\u529b\\n\\n\u5f53\u4eca\u4e3b\u6d41\u7684 CI \u5927\u591a\u57fa\u4e8e\u5bb9\u5668\uff0c\u76ee\u524d mvnd daemon \u53ea\u652f\u6301\u6765\u81ea\u672c\u673a client \u7684\u6784\u5efa\u8bf7\u6c42\uff0c\u5373\u5404\u4e2a job \u6240\u5c5e\u7684\u5bb9\u5668\u53ea\u80fd\u5229\u7528\u81ea\u8eab\u542f\u52a8\u7684 daemon, \u5047\u5982\u5bb9\u5668\u5185\u53ea\u8fdb\u884c\u5355\u6b21\u6784\u5efa\u7684\u8bdd\u90a3\u5c31\u6ca1\u90a3\u4e48\u5927\u4f18\u52bf\u4e86\uff0c\u800c\u672c\u5730\u6784\u5efa\u65e0\u6b64\u9650\u5236\uff0c\u793e\u533a\u6709\u7c7b\u4f3c\u7684 [\u8ba8\u8bba](https://github.com/apache/maven-mvnd/issues/496)\u3002\\n\\n> mvnd is primarily designed for iterative development on a developer workstation. I think it is worth trying as a drop-in replacement of stock Maven. In case of issues, the users are invited to report them in the project. I see little potential for mvnd in the area of continuous integration (CI). <br/> \u6765\u6e90: [Conversation with Peter Palaga and Guillaume Nodet ](https://www.infoq.com/news/2020/12/mvnd-mavens-speed-daemon/)\\n\\n### \u5e76\u884c\u6784\u5efa\u4e0d\u80fd\u65e0\u8111\u4f7f\u7528\\n\\n\u8bf7\u81ea\u884c\u9605\u8bfb [\u5e76\u884c\u6784\u5efa\u53ef\u80fd\u5e26\u6765\u7684\u95ee\u9898](https://peter.palaga.org/2021/01/12/mvnd-solving-common-issues-of-parallel-builds.html) \u4ee5\u53ca\u4f5c\u8005\u5411\u793e\u533a\u53cd\u9988\u7684 [\u95ee\u9898](https://github.com/apache/maven-mvnd/issues/558)\u3002\\n\\n## \u53c2\u8003\\n- [gradle-vs-maven-performance](https://gradle.org/gradle-vs-maven-performance/)\\n- [mvnd-mavens-speed-daemon](https://www.infoq.com/news/2020/12/mvnd-mavens-speed-daemon/)\\n- [mvnd-parallel-builds.html](https://peter.palaga.org/2021/01/11/mvnd-parallel-builds.html#smart_builder_by_default)"},{"id":"Maven Summary","metadata":{"permalink":"/Maven Summary","editUrl":"https://github.com/NoSugarCoffee/NoSugarCoffee.github.io/edit/master/blog/MavenSummary.md","source":"@site/blog/MavenSummary.md","title":"Maven Summary","description":"Head Metadata customized title!","date":"2022-01-01T00:00:00.000Z","formattedDate":"January 1, 2022","tags":[{"label":"maven","permalink":"/tags/maven"},{"label":"java","permalink":"/tags/java"}],"readingTime":2.175,"hasTruncateMarker":false,"authors":[{"name":"Shixu","title":"Owner","imageURL":"https://avatars.githubusercontent.com/u/25247325"}],"frontMatter":{"slug":"Maven Summary","title":"Maven Summary","date":"2022-01-01T00:00:00.000Z","author":"Shixu","author_title":"Owner","author_image_url":"https://avatars.githubusercontent.com/u/25247325","tags":["maven","java"]},"unlisted":false,"prevItem":{"title":"Mvnd vs Maven","permalink":"/Mvnd vs Maven"}},"content":"<head>\\n  <title>Head Metadata customized title!</title>\\n  <meta charSet=\\"utf-8\\" />\\n  <meta name=\\"mvn\\" content=\\"summary\\" />\\n</head>\\n\\n## What is Maven\\n[TL;DR](https://maven.apache.org/guides/getting-started/index.html#What_is_Maven)\\n\\n## Lifecycles, phases and (plugin) goals\\n\\n### Concepts\\n- [A Build Lifecycle is Made Up of Phases](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#a-build-lifecycle-is-made-up-of-phases). [A Build Phase is Made Up of Plugin Goals](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#a-build-lifecycle-is-made-up-of-phases). A plugin goal represents a specific task\\n\\n> Similar to gitlab `pipelines`,`stages` and `jobs`\\n\\n- Three built-in build lifecycles: [default](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#default-lifecycle) , clean and site\\n\\n- When we run a phase \u2013 all goals bound to this phase are executed in order. This won\'t only execute the specified phase but all the preceding phases as well\\n\\n> E.g. mvn clean install\\n\\n- A goal can bound to one or more build phases. A build phase can also have zero or more goals bound to it\\n\\n> [default lifecycle bindings](https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#default-lifecycle-bindings-packaging-ejb-ejb3-jar-par-rar-war)\\n\\n- A goal not bound to any build phase could be executed outside of the build lifecycle by direct invocation\\n\\n> E.g. mvn dependency:tree\\n\\n### Look up phases and goals\\n\\nUse [`mvn fr.jcgay.maven.plugins:buildplan-maven-plugin:list`](https://stackoverflow.com/questions/1709625/maven-command-to-list-lifecycle-phases-along-with-bound-goals) to list phases and goals in default lifecycle\\n\\n## Direct/Transitive dependency\\n> A -> B -> C , B, C is A\'s dependency, B is A\'s direct dependency, C is A\'s transitive dependency\\n\\n## Dependency conflict\\n\\nThe different versions of same dependency are all needed by others\\n\\n### Dependency mediation\\n\\n- Nearest definition\\n\\n> A -> B -> C -> D 2.0 and A -> E -> D 1.0  result will be D 1.0\\n\\n- First declaration\\n\\n```\\n// A.xml\\n<dependecy>B</dependency>\\n<dependecy>C</dependency>\\n```\\n> A -> B -> D 2.0 and A -> C -> D 1.0  result will be D 2.0\\n\\n\\n### Solution\\n\\n- According dependency mediation if have compatible versions\\n- Use [shade plugin](https://maven.apache.org/plugins/maven-shade-plugin/) if have not uncompatible versions\\n\\n## Best practice\\n\\n- Although transitive dependencies can implicitly include desired dependencies, it is a good practice to explicitly specify the dependencies your source code uses directly. This best practice proves its value especially when the dependencies of your project change their dependencies\\n\\n- Use a dependencyManagement section in a parent pom.xml to avoid duplicating dependency information in child projects\\n\\n- The phases named with hyphenated-words (pre-*, post-*, or process-*) are not usually directly called from the command line. These phases sequence the build, producing intermediate results that are not useful outside the build. In the case of invoking integration-test, the environment may be left in a hanging state\\n\\n## Commonly used\\n\\n### Commands\\n\\n- Help making best practice more achievable: `mvn dependency:analyze`\\n\\n- Run ut singly: `mvn -DfailIfNoTests=false -pl product.profile-service -Dtest=CheckSetHotelValidatorTest -am test`\\n\\n- Download artifact: `mvn dependency:get -DremoteRepositories=http://repo1.maven.org/maven2/ -DgroupId=com.google.code.gson -DartifactId=gson -Dversion=2.8.8`\\n\\n## Refs\\n\\n- https://maven.apache.org/\\n- https://www.baeldung.com/maven-goals-phases"}]}')}}]);