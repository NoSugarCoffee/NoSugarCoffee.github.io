"use strict";(self.webpackChunkshixu=self.webpackChunkshixu||[]).push([[395],{7285:function(e,t,a){a.r(t),a.d(t,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return d},assets:function(){return r},toc:function(){return c},default:function(){return m}});var n=a(7462),i=a(3366),l=(a(7294),a(3905)),o=["components"],s={slug:"Maven Summary",title:"Maven Summary",author:"Shixu",tags:["maven","java"]},p="Maven Summary",d={permalink:"/blog/Maven Summary",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/blog/blog/MavenSummary.md",source:"@site/blog/MavenSummary.md",title:"Maven Summary",description:"What is Maven",date:"2021-12-29T16:39:10.454Z",formattedDate:"December 29, 2021",tags:[{label:"maven",permalink:"/blog/tags/maven"},{label:"java",permalink:"/blog/tags/java"}],readingTime:2.11,truncated:!1,authors:[{name:"Shixu"}]},r={authorsImageUrls:[void 0]},c=[{value:"What is Maven",id:"what-is-maven",children:[]},{value:"Lifecycles, phases and (plugin) goals",id:"lifecycles-phases-and-plugin-goals",children:[{value:"Concepts",id:"concepts",children:[]},{value:"Look up phases and goals",id:"look-up-phases-and-goals",children:[]}]},{value:"Direct/Transitive dependency",id:"directtransitive-dependency",children:[]},{value:"Dependency conflict",id:"dependency-conflict",children:[{value:"Dependency mediation",id:"dependency-mediation",children:[]},{value:"Solution",id:"solution",children:[]}]},{value:"Best practice",id:"best-practice",children:[]},{value:"Commonly used",id:"commonly-used",children:[{value:"Commands",id:"commands",children:[]}]},{value:"Refs",id:"refs",children:[]}],u={toc:c};function m(e){var t=e.components,a=(0,i.Z)(e,o);return(0,l.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"what-is-maven"},"What is Maven"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://maven.apache.org/guides/getting-started/index.html#What_is_Maven"},"TL;DR")),(0,l.kt)("h2",{id:"lifecycles-phases-and-plugin-goals"},"Lifecycles, phases and (plugin) goals"),(0,l.kt)("h3",{id:"concepts"},"Concepts"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#a-build-lifecycle-is-made-up-of-phases"},"A Build Lifecycle is Made Up of Phases"),". ",(0,l.kt)("a",{parentName:"li",href:"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#a-build-lifecycle-is-made-up-of-phases"},"A Build Phase is Made Up of Plugin Goals"),". A plugin goal represents a specific task")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"Similar to gitlab ",(0,l.kt)("inlineCode",{parentName:"p"},"pipelines"),",",(0,l.kt)("inlineCode",{parentName:"p"},"stages")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"jobs"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Three built-in build lifecycles: ",(0,l.kt)("a",{parentName:"p",href:"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#default-lifecycle"},"default")," , clean and site")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"When we run a phase \u2013 all goals bound to this phase are executed in order. This won't only execute the specified phase but all the preceding phases as well"),(0,l.kt)("blockquote",{parentName:"li"},(0,l.kt)("p",{parentName:"blockquote"},"E.g. mvn clean install"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"A goal can bound to one or more build phases. A build phase can also have zero or more goals bound to it"))),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},(0,l.kt)("a",{parentName:"p",href:"https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#default-lifecycle-bindings-packaging-ejb-ejb3-jar-par-rar-war"},"default lifecycle bindings"))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"A goal not bound to any build phase could be executed outside of the build lifecycle by direct invocation")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"E.g. mvn dependency:tree")),(0,l.kt)("h3",{id:"look-up-phases-and-goals"},"Look up phases and goals"),(0,l.kt)("p",null,"Use ",(0,l.kt)("a",{parentName:"p",href:"https://stackoverflow.com/questions/1709625/maven-command-to-list-lifecycle-phases-along-with-bound-goals"},(0,l.kt)("inlineCode",{parentName:"a"},"mvn fr.jcgay.maven.plugins:buildplan-maven-plugin:list"))," to list phases and goals in default lifecycle"),(0,l.kt)("h2",{id:"directtransitive-dependency"},"Direct/Transitive dependency"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"A -> B -> C , B, C is A's dependency, B is A's direct dependency, C is A's transitive dependency")),(0,l.kt)("h2",{id:"dependency-conflict"},"Dependency conflict"),(0,l.kt)("p",null,"The different versions of same dependency are all needed by others"),(0,l.kt)("h3",{id:"dependency-mediation"},"Dependency mediation"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Nearest definition")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"A -> B -> C -> D 2.0 and A -> E -> D 1.0  result will be D 1.0")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"First declaration")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"// A.xml\n<dependecy>B</dependency>\n<dependecy>C</dependency>\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"A -> B -> D 2.0 and A -> C -> D 1.0  result will be D 2.0")),(0,l.kt)("h3",{id:"solution"},"Solution"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"According dependency mediation if have compatible versions"),(0,l.kt)("li",{parentName:"ul"},"Use ",(0,l.kt)("a",{parentName:"li",href:"https://maven.apache.org/plugins/maven-shade-plugin/"},"shade plugin")," if have not uncompatible versions")),(0,l.kt)("h2",{id:"best-practice"},"Best practice"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Although transitive dependencies can implicitly include desired dependencies, it is a good practice to explicitly specify the dependencies your source code uses directly. This best practice proves its value especially when the dependencies of your project change their dependencies")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Use a dependencyManagement section in a parent pom.xml to avoid duplicating dependency information in child projects")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"The phases named with hyphenated-words (pre-",(0,l.kt)("em",{parentName:"p"},", post-"),", or process-*) are not usually directly called from the command line. These phases sequence the build, producing intermediate results that are not useful outside the build. In the case of invoking integration-test, the environment may be left in a hanging state"))),(0,l.kt)("h2",{id:"commonly-used"},"Commonly used"),(0,l.kt)("h3",{id:"commands"},"Commands"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Help making best practice more achievable: ",(0,l.kt)("inlineCode",{parentName:"p"},"mvn dependency:analyze"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Run ut singly: ",(0,l.kt)("inlineCode",{parentName:"p"},"mvn -DfailIfNoTests=false -pl product.profile-service -Dtest=CheckSetHotelValidatorTest -am test"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Download artifact: ",(0,l.kt)("inlineCode",{parentName:"p"},"mvn dependency:get -DremoteRepositories=http://repo1.maven.org/maven2/ -DgroupId=com.google.code.gson -DartifactId=gson -Dversion=2.8.8")))),(0,l.kt)("h2",{id:"refs"},"Refs"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://maven.apache.org/"},"https://maven.apache.org/")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.baeldung.com/maven-goals-phases"},"https://www.baeldung.com/maven-goals-phases"))))}m.isMDXComponent=!0}}]);